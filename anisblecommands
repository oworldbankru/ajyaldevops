root@ubuntu:/etc/ansible# ansible --version
ansible 2.9.6
  config file = /etc/ansible/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/dist-packages/ansible
  executable location = /usr/bin/ansible
  python version = 2.7.12 (default, Oct  8 2019, 14:14:10) [GCC 5.4.0 20160609]

root@ubuntu:/etc/ansible# ls -lrt
total 28
-rw-r--r-- 1 root root  1016 Mar  4 21:39 hosts
-rw-r--r-- 1 root root 19985 Mar  4 21:39 ansible.cfg
drwxr-xr-x 2 root root  4096 Mar  4 21:46 roles
root@ubuntu:/etc/ansible#


vishal@ubuntu:/etc/ansible$ ls -lr
total 28
drwxr-xr-x 2 root root  4096 Mar  4 21:46 roles
-rw-r--r-- 1 root root  1016 Mar  4 21:39 hosts
-rw-r--r-- 1 root root 19985 Mar  4 21:39 ansible.cfg

Add new user to all the servers
==================================

vishal@ubuntu:~$ sudo su -
[sudo] password for vishal:
root@ubuntu:~# useradd ansadmin
root@ubuntu:~# passwd ansadmin
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully
root@ubuntu:~#

GIVE ROOT PERMISSIONS
==================================

root@ubuntu:~# visudo

#includedir /etc/sudoers.d
ansadmin  ALL=(ALL)     NOPASSWD: ALL

Enable password auth
=====================
root@ubuntu:~#  nano /etc/ssh/sshd_config

# Change to no to disable tunnelled clear text passwords
PasswordAuthentication yes

Save it

use keyg
=========

ssh-keygen


Add the servers 
==============
ssh-copy-id server_ip1
ssh-copy-id server_ip2
ssh-copy-id server_ip3

Add the ip to ansible host files
===============================
cd /etc/ansible
nano hosts
add ip of all the nodes in the hostfile


